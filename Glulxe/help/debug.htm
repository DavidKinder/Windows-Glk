<html>
 <head>
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
  <link rel="stylesheet" type="text/css" href="Glulxe.css">
 </head>
 <body>
<h1>The Debugger</h1>
A build of Windows Glulxe containing Glulxe's debugger is available as the <b>Glulxe_debug.exe</b>
executable.
<p>
To be useful, the debugger needs to be able to read the symbol information generated by Inform 6
with its <b>-k</b> command line switch. This is usually written out to a file <b>gameinfo.dbg</b>,
but can also be loaded from the Blorb file containing the game as a <b>Dbug</b> chunk. Note that
this symbol information must be in the XML-based format introduced with Inform 6.33.
<p>  
The behaviour of the debugger can be controlled through the following command line arguments:<br>
<p>
<table border="0" cellpadding="4" cellspacing="0">
  <tr>
    <td nowrap><b>--gameinfo &lt;path&gt;</b></td>
    <td>Specifies the path to the symbol information file, if it is not present in the game's Blorb file.</td>
  </tr>
  <tr>
    <td nowrap><b>--cpu</b></td>
    <td>Display the CPU usage of each game command in the debug console.</td>
  </tr>
  <tr>
    <td nowrap><b>--starttrap</b></td>
    <td>Enter debug mode at startup time.</td>
  </tr>
  <tr>
    <td nowrap><b>--quittrap</b></td>
    <td>Enter debug mode at quit time.</td>
  </tr>
  <tr>
    <td nowrap><b>--crashtrap</b></td>
    <td>Enter debug mode on any fatal error.</td>
  </tr>
</table>
<p>
When the game starts, a separate debug console window is opened. Debug commands can be entered into this
console when the game is waiting for input (to be precise, during <b>@glk_select</b> calls) and when the
interpreter is in debug mode. The available debug commands are:
<p>
<table border="0" cellpadding="4" cellspacing="0">
  <tr>
    <td nowrap><b>print &lt;val&gt;</b></td>
    <td>Print a symbol or number.</td>
  </tr>
  <tr>
    <td nowrap><b>bt</b></td>
    <td>Display the current stack backtrace, with local variables.</td>
  </tr>
  <tr>
    <td nowrap><b>break &lt;func&gt;</b></td>
    <td>Set a breakpoint. The <b>func</b> argument must be a function name or the address of a function.
        Breakpoints currently only work at the start of a function.</td>
  </tr>
  <tr>
    <td nowrap><b>clear &lt;func&gt;</b></td>
    <td>Clear a breakpoint.</td>
  </tr>
  <tr>
    <td nowrap><b>cont</b></td>
    <td>Leave debug mode and continue execution of the game.</td>
  </tr>
</table>
 </body>
</html>
